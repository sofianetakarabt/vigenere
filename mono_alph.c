# include <stdio.h>
# include <string.h>
# include <stdlib.h>
#include "head.h"


/*
* permutation avec des lettres miniscules
*/
char * monoalph(char *txt,char perm[TAILLE]){
int l = strlen(txt);
char * c = malloc(sizeof(char)*l);
char *cc=c;
while(*txt){
	*c=perm[*txt-'A']-'a'+'A';
	c++;txt++;
	}

return cc;
}
/*
* permutation avec des lettres miniscules
*/

char * dechiffre_mono (char *c,char perm[TAILLE]){
int l = strlen(c);
char * txt = malloc(sizeof(char)*l);
char *t=txt;

/*on construit la permutation inverse*/
char perm_inv [TAILLE];
int i ;
for(i=0;i<TAILLE;i++) perm_inv[perm[i] - 'a'] = i + 'a' ;

i=0;
while(*c){
	*txt = perm_inv[*c-'A'];
	c++;txt++;
	}
return t;
}


int main(int arg,char **args){

char txt[] =\
"HOPUNNOUVEAUTOURNANTPOURUNBLOGQUINESERVAITPASAGRANDCHOSESOUDAINEMENTTRANSFORMEENQUELQUECHOSEDUTILEUNSUPPORTPOURLERESUMEHEBDOMADAIREDEMESAVENTURESPALPITANTESENMALAISIEPROFONDEETALENTOURSLEVOYAGETOTDANSLASOIREEVERSUNPETITHDUMATINYOULEETMOIQUITTIONSILLIESLAJOLIEADEFAUTDETOUTEINFRASTRUCTUREDECENTEONNEPEUTLUIENLEVERCAVERSLILLEEUROPELABOUCHEEDUAUXMULTIPLESAUTOMOBILISTESAYANTSOUDAINEMELIDEESAUGRENUEDALLERTOUSAUMEMEMOMENTAUMEMEENDROITPUISCHARLESDEGAULLELEGRISAINSINOMMEPOURSAPALETTECHATOYANTEDECOULEURSNOUSETIONSPREPARESAUXDEUXOBSTACLESMAJEURSDENOTREPERIPLELECHECKINPARCEQUENOUSAVIONSENVIRONKILOSSUPERFLUSREPARTISAVECARTSURSACSLADOUANEVUQUEJENAVAISALORSQUUNBILLETALLERCEQUIPEUTPARAITREAUPREMIERABORDASSEZSUSPECTPOURUNTOURISTEETUNELOCALEQUIEMMENENTKILOSDEBAGAGESAEUXDEUXNOUSAVIONSDONCEULETEMPSDEREVISERLAVEILLEPENDANTLEMPAQUETAGENOSDIFFERENTSPROBLEMESAVENIRETSOMMESARRIVESAORGANISERLASITUATIONENDEUXPARTIESCEQUIJOUEENNOTREDEFAVEURETNOSRESSOURCESENNOTREDEFAVEURUNNOMBRECONSEQUENTDEBAGAGESCONSISTANTENUNECHARGETOTALEDENVIRONKILOSREPARTISENTRELASOUTEETNOSFRELESEPAULESPLOYEESSOUSLEFFORTDOULOUREUXDUNFARDEAUBIENTROPLOURDPOURELLESLALLERSIMPLECARCOMMEEXPLIQUEPRECEDEMMENTILESTASSEZDIFFICILEDEDONNERUNERAISONVALABLEAUFAITQUEJENETAISPASEQUIPELORSDEMONENTREEDEMONBILLETDERETOURNOUSAVONSDONCPLANIFIEMONVOYAGEIMAGINAIREAUTOURDELAMALAISIELATHAILANDEETAUTRESPAYSEXOTIQUESPOURYRENCONTRERDESAMISFICTIFSDANSLEURPETITEVILLENATALEAPRESCONSULTATIONDUSITEDAIRCHINAQUIDETAILLAITDANSUNPARAGRAPHEPERDUENTRECOMMENTRECLAMERVOSBAGAGESETCOMMENTRAMENERVOSMORCEAUXAVOSPROCHESLESYSTEMEDEPAIEMENTDESCHARGESSUPPLEMENTAIRESDEMANIEREAUSSIPRECISEQUUNNORMANDALCOOLIQUEAPRESUNBONQUARTDHEUREDERELECTUREJENVIENSALACONCLUSIONQUELLESSELEVENTADUPRIXDUNALLERSIMPLEDEDERNIEREMINUTESANSREDUCTIONPARKILOEXCESSIFETLACAPARAITPRESQUESIMPLEMAISCESTPARCEQUEJESUISGENTILAVECVOUSETENFAITUNALLERPOURLAMALAISIEENDERNIEREMINUTECESTCHERDOUUNECERTAINEAGITATIONENNOTREFAVEURETREDEUXCEQUIPERMETDECACHERLESSACSDECABINEDENVIRONKILOSCHACUNQUISONTDIFFICILEMENTACCEPTABLESPARUNPREPOSEAUCHECKINDOTEDUNMINIMUMDESENSDELOBSERVATIONLESTOURISTESSONTUNPEUFAIBLESCETTEANNEEILSARRIVENTAPEINEASOULEVERLEURSSACSDECABINEREMPLISARAZBORDUNSOURIRECHARMANTQUIMALGREUNEPELLICULEDESUEURCONSEQUENTEDUEAUXDIFFERENTESPETITESCHOSESQUENOUSEMMENIONSAVECNOUSDEVAITNOUSPERMETTREDEPASSERAVECLAISANCEDUFERAREPASSERSURLACHEMISEENSOIEONPEUTDONCFACILEMENTIMAGINERNOTRECALMEPOSEETNOTREATTITUDECONTENUELORSDENOTREARRIVEEALAEROPORTAPRESBIENSURLESQUELQUESESCALATORSRETORSAYANTEULIDEESAUGRENUEDEFAIREGREVECEJOURLAETRANGEMENTLECHECKINSESTADMIRABLEMENTBIENPASSELESEMPLOYESDAIRCHINAENFRANCEETANTAPEUPRESAUSSIALERTESQUEDESMOULESAUROQUEFORTAPEINEINTERESSESPARMONHISTOIRESIFINEMENTMONTEEMEDEMANDANTJUSTEDECOMBIENMOINSCHERJEPAYAISPARAIRCHINAPOURALLERENMALAISIEQUELQUEPARTJAIETEDECUKILOSSUBITEMENTENVOLESNOUSBAGUENAUDIONSDUNPASPRESQUELEGERDANSLAEROPORTFAISANTDEPETITSSLALOMSJOYEUXAVECNOSCHARIOTSENTRELESPASSANTSPRESSESATTENDANTTRANQUILLEMENTQUESAFFICHELAPORTEDENOTREVOLVOLQUISAVERANEPASAFFICHERDEPORTEETCEAUNEDEMIHEUREDESONDEPARTSUPPOSELATTENTEJOYEUSEDEVENUESTRESSANTELECHARIOTDEVENULOURDPOUSSIFETCOUINANTCESTAVECUNSOULAGEMENTINTENSEQUELHOTESSELEVALEVOILEDINCERTITUDEQUISAISISSAITLESPASSAGERSDEPUISPRESQUEUNEHEURELESMOULESAUROQUEFORTDOTEESDUNINSTINCTDESURVIEASSEZRAREPOURETRESIGNALEAVAIENTREUSSIASENFUIRDUCHECKINQUANDLAFOULEDEPASSAGERMECONTENTSSESTEPARPILLEEENQUETEDINFORMATIONAPRESQUELQUESLONGUESDIZAINESDEMINUTESNOUSPOUVIONSENFINMONTERABORDDANSUNVOLSPACIEUXETPEUREMPLIPRESQUEAGREABLEUNDETAILINTERESSANTFUTLATOTALEVACUITEDELAPREMIERECLASSEMALGREUNEDEMANDEDEMAPARTDEPASSERENPREMIEREENDEBUTDEVOYAGEVUQUILSNENAVAIENTPASLUTILITEDEMANDEQUIFUTREJETEESANSRAISONAUCUNEAINSIQUEMASUGGESTIONDORGANISERUNELOTERIEPOURATTRIBUERLESPLACESDEPREMIEREAUXPASSAGERSDESECONDEMALGRELAPERTINENCEDECETTESUGGESTIONDEGESTECOMMERCIALELLEFUTEGALEMENTJUGEEIRRECEVABLELARAISONMEVINTQUELQUESHEURESPLUSTARDQUANDJEUSLENVIEPRESSANTEDEDERANGERTOUSMESVOISINSPOURALLERDANSLESIMULATEURSISMIQUEQUISERTGENERALEMENTDECOMMODITESSURLESVOLSDECEGENREALORSQUEMONSENSDELADEDUCTIONMINDIQUAITQUEPERSONNESDEBOUTAUMILIEUDUCOULOIRDANSUNAVIONENDORMISONTGENERALEMENTSIGNEDUNEINCONFORTABLEATTENTEPOURSOULAGERUNEPERSONNEHONORABLECERTESMAISQUIOUBLIEFREQUEMMENTLEFFETINCONTINENCEQUEPROVOQUEENELLELEJUSDETOMATEJEMEDIRIGEAISDONCVERSLAPREMIERECLASSEQUEJIMAGINAISALORSDOTEEDESESPROPRESTOILETTESPOUREVITERAUXELITESSINOFRANCAISESDEPOSERLEURPOSTERIEURDANSLODEURDURINEDELAPLEBEJEMAVANCEDONCBRAVEMENTVERSLERIDEAUINTERDITDESEPARATIONDESCLASSESQUEJECARTEDUNMOUVEMENTFRANCQUOIQUELEGEREMENTPRESSANTETLASTUPEURCAFAISAITUNBOUTDETEMPSQUEJENAVAISPUTEMOIGNERMASTUPEFACTIONLAPREMIERECLASSESUPPOSEEVIDEENDEBUTDETRAJETETAITBONDEEDECORPSETENDUSDHOTESETHOTESSESDELAIRLASECONDEDESTUPEFACTIONPASSEEJETRAVERSELEQUIPAGEENDORMIPOURRENCONTRERMONOBJECTIFFELICITANTAUPASSAGEMONSENSDELADEDUCTIONAPRESQUESEFUSSENTFAITESLESCHOSESQUISEDEVAIENTDETREFAITESJEREMARQUAISQUEMABREVEINCARTADEAUXREGLESETABLIESAVAITREVEILLELEQUIPAGEETQUEPRISDUNSOUDAINSENTIMENTDECULPABILITEILSDECIDERENTCOMMEUNSEULHOMMEDEPREPARERUNCHARIOTDEBOISSONSDALLERSOCCUPERDUNTRUCQUELQUEPARTOUDEFAIRESEMBLANTDECHERCHERQUELQUECHOSEDANSUNPLACARDVIDECETTEPETITESECONDEDEVICTOIREMERENDITTELLEMENTJOYEUXQUUNEFOISRASSISAMAPLACEJOUBLIAISLORIGINEDECETTEAVENTUREETCOMMANDAITUNJUSDETOMATEALHOTESSEQUEJAVAISHONTEUSEMENTREVEILLEELERESTANTDUVOYAGESEDEROULANTSANSENCOMBRESNOUSARRIVAMESBIENTOTABEIJINGOUNOUSETIONSSUPPOSESATTENDRELESPROCHAINESHEURESNOTREPROCHAINVOLENDIRECTIONDEKUALALUMPURUNTRESJOLIAEROPORTDAILLEURSRENOVEDEFRAISPOURACCUEILLIRDESSPORTIFSDETOUTESORTELEURSSPONSORSETLEURPUBLICETLEURDONNERTOUTELIMPRESSIONDELUXEQUILSPENSENTMERITERBREFCESTJOLICESTBLANCCABRILLEETCAFAITUNPEUVIDENOUSREALISONSENCOREUNEFOISQUELAPRINCIPALEQUALITEDELOPERATEURAERIENCHINOISNESTPASSAPONCTUALITEETATTENDONSENCOREQUELQUESHEURESAVECLENSEMBLEDESPASSAGERSCHINEMALAISIECESTAPRESUNEPETITEATTENTEACOMPARERLESGOUTSVESTIMENTAIRESDESUNSETDESAUTRESQUENOUSNOUSEMBARQUONSDANSLABOITEASARDINESQUIDEVRANOUSFAIREVOLERVERSNOTREDESTINATIONJENIMAGINAISPASAQUELPOINTNOTREPRECEDENTAVIONETAITCONFORTABLEJUSQUACEQUEJEREUSSISSEMINSERERDANSLESPACEQUELHOTESSENOMMAITSIEGECENSEMETREATTRIBUEJENEMESUISJAMAISSENTIAUSSIPROCHEDEMESGENOUXETSIEXTREMEMENTINTIMEAVECMESVOISINSAPRESQUELQUESHEURESDETORTURESANSEVENEMENTNOTABLELACTIVITEVIENTDUMOUVEMENTNOUSARRIVIONSENFINENMALAISIEAPRESSETREDESINCRUSTEDUSIEGEJEUSMONPREMIERCONTACTDEPUISLONGTEMPSAVECLATMOSPHEREMALAISOISEENDESCENDANTDELAPPAREILPOURPRENDRELEBUSILFAITAUSSICHAUDETHUMIDEQUUNAPRESMIDIAVANTLORAGEENETEAHUNPETITINSTANTDEREGRETENPENSANTANOSDEGRESESTIVAUXDEUCHNORDETJEMONTEDANSLADEUXIEMEBOITELERESTEAUNAIRDEDEJAVUCHARIOTSBAGAGESATTENTESLALOMSJOYEUXJUSQUALASORTIEDELAEROPORTOUNOUSHELONSUNTAXIQUINOUSEMMENEDENUITJUSQUAMELAKAVILLETOURISTIQUEASSEZIMPORTANTEADEUXHEURESDEROUTEDELAYOULEDISCUTEAVECLECHAUFFEURQUONAARRETEAPRESMINUTESSURLESZEBRASPOURVERIFIERQUONAVAITBIENTOUTLESBAGAGESETJEMENDORSDOUCEMENTENEVITANTDEPENSERALAMANIEREDECONDUIREDELAPOPULATION";

int i;
char perm[TAILLE];
for(i= 0;i<TAILLE;i++){
	perm[i]= TAILLE-i+'a'-1;
}

char *c = monoalph(txt,perm);
char *txt1 = dechiffre_mono(c,perm);
printf("texte chiffré :\n%s\n",c);
printf("texte dechiffré :\n%s\n",txt1);
free(c);

}
/*
aujourdhuitonestmercredi
zfqlfiwsfrglmvhgnvixivwr
*/
